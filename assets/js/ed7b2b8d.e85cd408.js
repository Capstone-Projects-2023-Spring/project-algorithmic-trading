"use strict";(self.webpackChunkcreate_project_docs=self.webpackChunkcreate_project_docs||[]).push([[3961],{3905:(e,t,a)=>{a.d(t,{Zo:()=>h,kt:()=>u});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=r.createContext({}),d=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},h=function(e){var t=d(e.components);return r.createElement(l.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),p=d(a),m=n,u=p["".concat(l,".").concat(m)]||p[m]||c[m]||i;return a?r.createElement(u,o(o({ref:t},h),{},{components:a})):r.createElement(u,o({ref:t},h))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:n,o[1]=s;for(var d=2;d<i;d++)o[d]=a[d];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5531:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var r=a(7462),n=(a(7294),a(3905));const i={sidebar_position:1},o=void 0,s={unversionedId:"system-architecture/design",id:"system-architecture/design",title:"design",description:"Purpose",source:"@site/docs/system-architecture/design.md",sourceDirName:"system-architecture",slug:"/system-architecture/design",permalink:"/project-algorithmic-trading/docs/system-architecture/design",draft:!1,editUrl:"https://github.com/Capstone-Projects-2023-Spring/project-algorithmic-trading/edit/main/documentation/docs/system-architecture/design.md",tags:[],version:"current",lastUpdatedBy:"Owen King",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docsSidebar",previous:{title:"System Architecture",permalink:"/project-algorithmic-trading/docs/category/system-architecture"},next:{title:"API Specification",permalink:"/project-algorithmic-trading/docs/category/api-specification"}},l={},d=[{value:"1. Thread",id:"1-thread",level:2},{value:"2. databaseThread",id:"2-databasethread",level:2},{value:"3. strategyThread",id:"3-strategythread",level:2},{value:"4. userThread",id:"4-userthread",level:2},{value:"5. SP500Strategy",id:"5-sp500strategy",level:2},{value:"6. longTermTradingStrategy",id:"6-longtermtradingstrategy",level:2},{value:"7. DayTradingStrategy",id:"7-daytradingstrategy",level:2}],h={toc:d};function p(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},h,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Purpose")),(0,n.kt)("p",null,"The Design Document - Part I Architecture describes the software architecture and how the requirements are mapped into the design. This document will be a combination of diagrams and text that describes what the diagrams are showing."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Requirements")),(0,n.kt)("p",null,"In addition to the general requirements the Design Document - Part I Architecture will contain:"),(0,n.kt)("p",null,"A description the different components and their interfaces. For example: client, server, database."),(0,n.kt)("p",null,"For each component provide class diagrams showing the classes to be developed (or used) and their relationship."),(0,n.kt)("p",null,"Sequence diagrams showing the data flow for ",(0,n.kt)("em",{parentName:"p"},"all")," use cases.\xa0One sequence diagram corresponds to one use case and different use cases should have different corresponding sequence diagrams."),(0,n.kt)("p",null,"Describe algorithms employed in your project, e.g. neural network paradigm, training and training data set, etc."),(0,n.kt)("p",null,"If there is a database:"),(0,n.kt)("p",null,"Entity-relation diagram."),(0,n.kt)("p",null,"Table design."),(0,n.kt)("p",null,"A check list for architecture design is attached here ",(0,n.kt)("a",{parentName:"p",href:"https://templeu.instructure.com/courses/106563/files/16928870/download?wrap=1",title:"architecture_design_checklist.pdf"},"architecture","_","design","_","checklist.pdf"),"\xa0 and should be used as a guidance."),(0,n.kt)("p",null,"DELETE REQUIREMENTS LATER"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Algorithms")),(0,n.kt)("p",null,"This application will utilize machine learning to make decisions on which stock to purchase. Stocks will be analyzed as discrete time data, and whether or not to purchase a stock will be determined by the stock's price, market cap, historical returns, volume of historical trades, alpha (excess return), beta (volatility) and any other quantitative data. This means we will be using technical anaylsis for our algorithms, which is best used in more short term trades. Essentially, the behavior of stock prices will be treated as a regression problem. In particular, there will be three trading strategies employed:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"S&P 500: Evaluate each stock comprising the S&P 500, determine its growth potential and sort each company in order of predicted growth. Then, if fractional shares are allowed, divide the user's capital and invest in each stock in proportion to its growth potential, i.e. if Apple is projected to be three times more likely to grow than Tesla, invest three times more money into Apple than Tesla. If fractional shaes are not allowed, then find every permutation of stocks that may be purchased from this list and chose the overall most profitable one."),(0,n.kt)("li",{parentName:"ol"},"Long Term: Analyze the stock market and flag certain stocks for growth, investing a specified percentage of the user's capital into each flagged stock. Then, once the stock is determined to no longer be growing, sell the stock."),(0,n.kt)("li",{parentName:"ol"},"Day Trading: Analyzing the stock market, find stocks that are currently growing and then immediately sell once the begin decreasing. This will be done at a high frequency.")),(0,n.kt)("p",null,"The success of these algorithms will be determined by how they perform in comparison to the S&P 500, root mean squared error, and mean absolute percent error."),(0,n.kt)("h1",{id:"class-diagram"},"Class Diagram"),(0,n.kt)("mermaid",{value:"classDiagram\n\nclass  Thread  {\n\n<<interface>>\n\n+ __init__()\n\n+  start()\n\n+  run()\n\n+  join()\n\n+  is_alive()\n\n}\n\nclass  databaseThread  {\n\n#  String databaseURL\n\n#  String databasePassword\n\n#  String serverIP\n\n-  Connection connection\n\n-  Cursor cursor\n\n+  executeQuery() List~tuple~ return\n\n-  notifyWebsite()\n}\n\nclass  userThread{\n\n-  String username\n\n-  String password\n\n-  String quantConnectUsername\n\n-  String quantConnectPassword\n- String Strategy\n+  Dictionary~String stock, float percentAllocation~  Portfolio\n\n\n+  getPortfolio()\n\n+  recieveStrategy()\n\n+  requestTrade()\n\n+  updatePortfolio()\n\n}\n\nclass  strategyThread{\n\n<<interface>>\n\n-  Dictionary~String name, String value~  Parameters\n\n#  String AlphaVantageAPIKey\n\n-  List~tuple~  stockData\n\n+  Dictionary~String stock, float percentAllocation~  Strategy\n\n-  unpackParameters()\n\n+  recieveStockData()\n\n-  recordStockData()\n\n-  updateStrategy()\n\n}\n\nclass  SP500Strategy  {\n\n  \n\n}\n\nclass  longTermTradingStrategy{\n\nint plannedYearsInvested\n\nString riskLevel\n\n  \n\n}\n\nclass  DayTradingStrategy{\n\nfloat floorPercentage\n\nfloat benchmarkPercentage\n\n  \n\n}\nThread  <|--  userThread\n\nstrategyThread  <..  userThread\n\n\n  \n\nThread  <|--  databaseThread\n\n\nThread  <|--  strategyThread\n\nstrategyThread  <|--  SP500Strategy\n\nstrategyThread  <|--  longTermTradingStrategy\n\nstrategyThread  <|--  DayTradingStrategy\n\ndatabaseThread  <..  strategyThread"}),(0,n.kt)("h2",{id:"1-thread"},"1. Thread"),(0,n.kt)("p",null,"Taken from python library threading.  Documentation taken from man page:\n",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("strong",{parentName:"strong"},"init"),"()"),": Initializes the thread"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"start()"),":\nStart the thread\u2019s activity."),(0,n.kt)("p",null,"It must be called at most once per thread object. It arranges for the object\u2019s  ",(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/threading.html#threading.Thread.run",title:"threading.Thread.run"},(0,n.kt)("inlineCode",{parentName:"a"},"run()")),"  method to be invoked in a separate thread of control."),(0,n.kt)("p",null,"This method will raise a  ",(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/exceptions.html#RuntimeError",title:"RuntimeError"},(0,n.kt)("inlineCode",{parentName:"a"},"RuntimeError")),"  if called more than once on the same thread object."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"run()"),":\nMethod representing the thread\u2019s activity."),(0,n.kt)("p",null,"You may override this method in a subclass. The standard  ",(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/threading.html#threading.Thread.run",title:"threading.Thread.run"},(0,n.kt)("inlineCode",{parentName:"a"},"run()")),"  method invokes the callable object passed to the object\u2019s constructor as the  ",(0,n.kt)("em",{parentName:"p"},"target"),"  argument, if any, with positional and keyword arguments taken from the  ",(0,n.kt)("em",{parentName:"p"},"args"),"  and  ",(0,n.kt)("em",{parentName:"p"},"kwargs"),"  arguments, respectively."),(0,n.kt)("p",null,"Using list or tuple as the  ",(0,n.kt)("em",{parentName:"p"},"args"),"  argument which passed to the  ",(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/threading.html#threading.Thread",title:"threading.Thread"},(0,n.kt)("inlineCode",{parentName:"a"},"Thread")),"  could achieve the same effect."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"join()"),":\nWait until the thread terminates. This blocks the calling thread until the thread whose  ",(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/threading.html#threading.Thread.join",title:"threading.Thread.join"},(0,n.kt)("inlineCode",{parentName:"a"},"join()")),"  method is called terminates \u2013 either normally or through an unhandled exception \u2013 or until the optional timeout occurs."),(0,n.kt)("p",null,"When the  ",(0,n.kt)("em",{parentName:"p"},"timeout"),"  argument is present and not  ",(0,n.kt)("inlineCode",{parentName:"p"},"None"),", it should be a floating point number specifying a timeout for the operation in seconds (or fractions thereof). As  ",(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/threading.html#threading.Thread.join",title:"threading.Thread.join"},(0,n.kt)("inlineCode",{parentName:"a"},"join()")),"  always returns  ",(0,n.kt)("inlineCode",{parentName:"p"},"None"),", you must call  ",(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/threading.html#threading.Thread.is_alive",title:"threading.Thread.is_alive"},(0,n.kt)("inlineCode",{parentName:"a"},"is_alive()")),"  after  ",(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/threading.html#threading.Thread.join",title:"threading.Thread.join"},(0,n.kt)("inlineCode",{parentName:"a"},"join()")),"  to decide whether a timeout happened \u2013 if the thread is still alive, the  ",(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/threading.html#threading.Thread.join",title:"threading.Thread.join"},(0,n.kt)("inlineCode",{parentName:"a"},"join()")),"  call timed out."),(0,n.kt)("p",null,"When the  ",(0,n.kt)("em",{parentName:"p"},"timeout"),"  argument is not present or  ",(0,n.kt)("inlineCode",{parentName:"p"},"None"),", the operation will block until the thread terminates."),(0,n.kt)("p",null,"A thread can be joined many times."),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/threading.html#threading.Thread.join",title:"threading.Thread.join"},(0,n.kt)("inlineCode",{parentName:"a"},"join()")),"  raises a  ",(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/exceptions.html#RuntimeError",title:"RuntimeError"},(0,n.kt)("inlineCode",{parentName:"a"},"RuntimeError")),"  if an attempt is made to join the current thread as that would cause a deadlock. It is also an error to  ",(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/threading.html#threading.Thread.join",title:"threading.Thread.join"},(0,n.kt)("inlineCode",{parentName:"a"},"join()")),"  a thread before it has been started and attempts to do so raise the same exception."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"is_alive()"),":\nReturn whether the thread is alive."),(0,n.kt)("p",null,"This method returns  ",(0,n.kt)("inlineCode",{parentName:"p"},"True"),"  just before the  ",(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/threading.html#threading.Thread.run",title:"threading.Thread.run"},(0,n.kt)("inlineCode",{parentName:"a"},"run()")),"  method starts until just after the  ",(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/threading.html#threading.Thread.run",title:"threading.Thread.run"},(0,n.kt)("inlineCode",{parentName:"a"},"run()")),"  method terminates. The module function  ",(0,n.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/threading.html#threading.enumerate",title:"threading.enumerate"},(0,n.kt)("inlineCode",{parentName:"a"},"enumerate()")),"  returns a list of all alive threads."),(0,n.kt)("h2",{id:"2-databasethread"},"2. databaseThread"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"executeQuery(String query)"),":\nTakes in query to be run, runs query on database, returns query output as a list of tuples, with each\ntuple corresponding to a row.",(0,n.kt)("br",{parentName:"p"}),"\n","This function will be used to update user/stock data as well as return such data to user and strategy threads.\n",(0,n.kt)("strong",{parentName:"p"},"notifyWebsite()"),":\nThread is connected to website with websocket, after query has been run to update the database, sends\nnotification for page to refresh and display new data."),(0,n.kt)("h2",{id:"3-strategythread"},"3. strategyThread"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"unpackParameters()"),":\nParameters passed to each of the threads that implement this class will be different, but all parameters will be passed in by dictionary.  Takes elements of key;value pairs and update local variables.\n",(0,n.kt)("strong",{parentName:"p"},"recieveStockData()"),":\nMakes API call to AlphaVantage will APIKey to gather stock information on stocks relevant to Strategy,\n",(0,n.kt)("strong",{parentName:"p"},"recordStockData()"),":\nStores gathered stock data into historical record sending query to database thread to update relevant tables\n",(0,n.kt)("strong",{parentName:"p"},"updateStrategy()"),":\nBased on gathered stock data, determination is made on which stocks to include in recommended portfolio for strategy"),(0,n.kt)("h2",{id:"4-userthread"},"4. userThread"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"updatePortfolio()"),":\nMain task for thread, initially calls ",(0,n.kt)("strong",{parentName:"p"},"getPortfolio()")," to store current holdings in thread, then calls ",(0,n.kt)("strong",{parentName:"p"},"recieveStrategy")," to determine if updates must be made.\n",(0,n.kt)("strong",{parentName:"p"},"getPortfolio()"),":\nGets current portfolio for user from QuantConnect API, takes amount of holdings in all stocks and converts\ncurrent value to percentage of all holdings to store in portfolio dictionary.\n",(0,n.kt)("strong",{parentName:"p"},"recieveStrategy()"),":\nBased on selected strategy for user, Strategy is gathered from strategy thread.  If there are any changes to current strategy, trades are requested through the ",(0,n.kt)("strong",{parentName:"p"},"requestTrade()")," function.\n",(0,n.kt)("strong",{parentName:"p"},"requestTrade()"),":\nUsing QuantConnection API, trades are performed until current portfolio matches portfolio recieved from strategy thread.",(0,n.kt)("br",{parentName:"p"}),"\n","As each API call is made, thread waits until confirmation of trade is completed before next trade is initiated for current user.",(0,n.kt)("br",{parentName:"p"}),"\n","If trade fails, a new trade will instead be requested to move money into a money market account until next trade request is made, at which point the stocks in portfolio will attempt to be purchased again"),(0,n.kt)("h2",{id:"5-sp500strategy"},"5. SP500Strategy"),(0,n.kt)("p",null,"This is our most basic trading strategy.  The strategy does not factor any user parameters into strategy, determination of how strategy is made is yet to be determined in detail."),(0,n.kt)("h2",{id:"6-longtermtradingstrategy"},"6. longTermTradingStrategy"),(0,n.kt)("p",null,"Takes into account different time horizons for when users are expecting to sell off stocks, and level of risk depending on user preference.",(0,n.kt)("br",{parentName:"p"}),"\n","While the code for determining the trading strategy will be complex, no unique functions will be created other than those defined in the strategyThread interface that this class implements.  "),(0,n.kt)("h2",{id:"7-daytradingstrategy"},"7. DayTradingStrategy"),(0,n.kt)("p",null,"Similarly to our other two trading strategies, no additional functions are implemented, but user's selection of what their largest threshold is for loss, stored as ",(0,n.kt)("em",{parentName:"p"},"floorPercentage"),", and what percentage gain at which point they wish to sell, ",(0,n.kt)("em",{parentName:"p"},"benchmarkPercentage"),", are taken into consideration in ",(0,n.kt)("strong",{parentName:"p"},"updateStrategy()")," function."))}p.isMDXComponent=!0}}]);